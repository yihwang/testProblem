# 舆情简报服务WebUI

基于Gradio构建的Web用户界面，用于生成结构化舆情简报。用户可以在界面上输入监控主题，点击按钮后，能够清晰地查看到系统生成的结构化舆情简报，包括正面意见、负面关切和建设性建议。

## 功能特性

- 🎯 **简单易用**：直观的界面设计，仅需输入监控主题即可获取舆情简报
- 📊 **结构化分析**：自动从海量信息中提取正面意见、负面关切和建设性建议
- ⚡ **快速响应**：支持内部调用方式，提供更快的处理速度
- 🎨 **现代化界面**：使用Gradio构建的美观易用的Web界面
- 📝 **示例主题**：提供常用示例主题，方便快速测试

## 安装依赖

在运行WebUI之前，需要安装必要的依赖：

```bash
# 进入web目录
cd /data/wangyihong/testProblem/web

# 安装依赖
pip install -r requirements.txt
```

## 运行WebUI

安装完依赖后，可以通过以下命令启动WebUI：

```bash
# 在web目录下执行
python app.py
```

启动成功后，可以通过浏览器访问以下地址：
- 本地访问：http://127.0.0.1:7860
- 局域网访问：http://[服务器IP]:7860

## 使用说明

1. 在**监控主题**输入框中输入您关心的主题关键词（例如："人工智能"、"环境保护"等）
2. 调整**获取文章数量**滑块，选择要分析的文章数量（1-20篇）
3. 点击**生成结构化舆情简报**按钮
4. 等待片刻，系统将显示：
   - 正面意见总结：从文章中提取的正面观点和评价
   - 负面关切总结：从文章中提取的负面问题和担忧
   - 建设性建议总结：从文章中提取的解决方案和建议
   - 元信息：显示处理的主题、文章数量和处理时间

## 配置说明

WebUI支持以下配置选项：

- **使用内部调用**：默认勾选，表示直接调用内部服务而不通过HTTP API，具有更快的响应速度
- **示例主题按钮**：提供了几个常用主题的快速选择按钮

## 注意事项

1. 确保testProblem项目的其他服务和依赖已正确安装
2. 如果需要从其他设备访问WebUI，请确保服务器的7860端口已开放
3. 处理大量文章可能需要较长时间，请耐心等待
4. 如果遇到错误，请查看控制台输出获取详细错误信息

## 开发说明

如果您需要修改或扩展WebUI功能，可以编辑`app.py`文件：

- 界面布局：通过修改Gradio的Blocks和组件配置来调整界面布局
- 业务逻辑：在`generate_structured_briefing`方法中修改简报生成的逻辑
- 响应处理：调整`on_generate_click`函数来修改按钮点击后的响应处理

## 常见问题

**Q: 启动时出现"ModuleNotFoundError"怎么办？**
A: 请确保已正确安装所有依赖，可以再次运行`pip install -r requirements.txt`

**Q: 生成简报时出现错误怎么办？**
A: 请检查控制台输出的错误信息，确认项目的其他服务是否正常运行

**Q: 如何修改WebUI的端口？**
A: 在`app.py`文件的最后，修改`demo.launch()`的`server_port`参数

**Q: 如何让WebUI可以从外部网络访问？**
A: 在`app.py`文件的最后，修改`demo.launch()`的`server_name="0.0.0.0"`和`share=True`